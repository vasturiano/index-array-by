<script src="//cdn.jsdelivr.net/npm/index-array-by"></script>
<!--<script src="../dist/index-array-by.js"></script>-->

<script>

    const people = [
      { name: 'Mary', surname: 'Jane', age: 28 },
      { name: 'John', surname: 'Smith', age: 24 },
      { name: 'John', surname: 'Doe', age: 32 }
    ];

    console.log(indexBy(people, 'surname', false));
    /* {
     Doe: { name: 'John', age: 32 },
     Jane: { name: 'Mary', age: 28 },
     Smith: { name: 'John', age: 24 }
    } */

    console.log(indexBy(people, 'name', true));
    /* {
      Mary: [ { surname: 'Jane', age: 28 } ],
      John: [
        { surname: 'Smith', age: 24 },
        { surname: 'Doe', age: 32 }
      ]
    } */

    console.log(indexBy(people, ({ name, surname }) => `${surname}, ${name}`, false));
    /* {
     'Jane, Mary: { name: 'Mary', surname: 'Jane', age: 28 },
     'Smith, John': { name: 'John', surname: 'Smith', age: 24 },
     'Doe, John': { name: 'John', surname: 'Doe', age: 32 }
    } */

    console.log(indexBy(people, ['name', 'surname'], false));
    /* {
     Mary: { Jane: { age: 28 }},
     John: { Smith: { age: 24 }, Doe: { age: 32 }}
   } */

    console.log(indexBy(people, ({ age }) => `${Math.floor(age / 10) * 10}s`, true));
    /* {
      '20s': [
        { name: 'Mary', surname: 'Jane', age: 28 },
        { name: 'John', surname: 'Smith', age: 24 },
      ],
      '30s': [{ name: 'John', surname: 'Doe', age: 32 }]
   } */

</script>